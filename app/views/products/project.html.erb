<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Menu</title>

    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
	<div class="container-fluid">
		<header class="page-header">
			<h1>Restaurant Menu</h1>
		</header>
		
		<form class="row">
			<fieldset class="col-md-6">
				<h2>Diner one</h2>
				<h3>Starters</h3>
				<div class="radio">
					<label>
						<input type="radio" data-price="3" name="one-starter" id="one-starter-soup"> Soup of the day £3
					</label>
				</div>
				<div class="radio">
					<label>
						<input type="radio" data-price="5" name="one-starter" id="one-starter-pate"> Pâté £5
					</label>
				</div>
				<div class="radio">
					<label>
						<input type="radio" data-price="4.5" name="one-starter" id="one-starter-bruschetta"> Bruschetta £4.50
					</label>
				</div>
				<div class="radio">
					<label>
						<input type="radio" data-price="6" name="one-starter" id="one-starter-prawn"> Prawn cocktail £6
					</label>
				</div>
				<h3>Main course</h3>
				<div class="radio">
					<label>
						<input type="radio" data-price="18" name="one-main" id="one-main-steak"> Steak £18
					</label>
				</div>
				<div class="radio">
					<label>
						<input type="radio" data-price="11.5" name="one-main" id="one-main-meatballs"> Meatballs £11.50
					</label>
				</div>
				<div class="radio">
					<label>
						<input type="radio" data-price="14" name="one-main" id="one-main-salmon"> Salmon fillet £14
					</label>
				</div>
				<div class="radio">
					<label>
						<input type="radio" data-price="12" name="one-main" id="one-main-lasagna"> Vegetarian lasagna £12
					</label>
				</div>
				<h3>Desserts</h3>
				<div class="radio">
					<label>
						<input type="radio" data-price="4" name="one-dessert" id="one-dessert-pudding"> Sticky toffee pudding £4
					</label>
				</div>
				<div class="radio">
					<label>
						<input type="radio" data-price="4.5" name="one-dessert" id="one-dessert-tiramisu"> Tiramisu £4.50
					</label>
				</div>
				<div class="radio">
					<label>
						<input type="radio" data-price="4" name="one-dessert" id="one-dessert-cheesecake"> Cheesecake £4
					</label>
				</div>
				<div class="radio">
					<label>
						<input type="radio" data-price="3.5" name="one-dessert" id="one-dessert-icecream"> Ice cream £3.50
					</label>
				</div>
			</fieldset>
			<fieldset class="col-md-6">
				<h2>Diner two</h2>
				<h3>Starters</h3>
				<div class="radio">
					<label>

						<input type="radio" data-price = "13" name="two-starter" id="two-starter-soup"> Soup of the day £3
					</label>
				
				
			</fieldset>
		</form>
		<div class="row">
			<div class="col-md-12">
				<p class="alert alert-info">Total: £<span id="js-total">0</span></p>
				<p class="alert alert-danger hide" id="js-error-handling"></p>
				<p class="alert alert-success hide" id="js-success">Thank you for your order</p>
				<p><button class="btn btn-success">Place your order</button></p>
			</div>
		</div>
	</div>

   
  </body>
  <script>
  	var menu = {
	init: function() {
		
		// Update total when a selection is made
		$('input:radio').change(menu.updateTotal);
		
		// Validate menu choices on submit
		$('button').click(menu.validate);
	},
	
	updateTotal: function() {
		
		var totalCost = parseFloat(0);
		
		// get price of all selected menu options
		$('input:radio:checked').each(function() {
			totalCost = totalCost + parseFloat($(this).attr('data-price'));
		});
		
		// update new total
		$('#js-total').text((totalCost).toFixed(2));
	},
	
	validate: function() {
		
		var messages = '';		
		
		// Each person must have at least two courses, one of which must be a main.
		messages += menu.twoCourses();
		
		// There is only one piece of cheesecake left.
		messages += menu.noMoreCheesecake();
		
		// Pierre the snobby waiter will not let you have prawn cocktail and salmon fillet in the same meal.
		messages += menu.somethingFishy();
		
		// Append error messages
		if(messages) {
			$('#js-success').addClass('hide');
			$('#js-error-handling').html(messages).removeClass('hide');
		}
		else {
			$('#js-error-handling').empty().addClass('hide');
			$('#js-success').removeClass('hide');
		}
	},
	
	twoCourses: function() {
		
		var message = '';
		var firstForm = menu.getSelections('one', ["starter", "main", "dessert"]);
		var secondForm = menu.getSelections('two', ["starter", "main", "dessert"]);
		if(firstForm < 2 || secondForm < 2) {
			message = 'Each diner must select at least two courses.<br />';
		}
		
		return message;
			
	},
	
	noMoreCheesecake: function() {

		var message = "";
		
		// Only one diner can have cheesecake
		if($('input[id*="cheesecake"]:checked').length > 1) {
			message = 'There is only one piece of cheesecake left. Please change your selection.<br />';
		}
		
		return message;
	},
	
	somethingFishy: function() {
		
		var message = "";
		
		if(($('#one-starter-prawn').is(':checked') && $('#one-main-salmon').is(':checked')) || ($('#two-starter-prawn').is(':checked') && $('#two-main-salmon').is(':checked'))) {
			message = 'You cannot have the prawn cocktail and salmon in the same meal.'
		}
		
		return message;
	},
	
	getSelections: function (term, courses) {
		courses.forEach(function(c, i) {
			courses[i] = $('input[name=' + term + '-' + c + ']:checked').length;
		});
		return courses.reduce(function(a, b) { return a + b; });
	}

}

menu.init();
</script>
</html>